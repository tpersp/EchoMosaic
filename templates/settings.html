<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <title>EchoMosaic Settings</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <script>
  function triggerUpdate() {
    fetch('/update_app', {
      method: 'POST',
      headers: {
        'X-API-Key': '{{ config.get("API_KEY", "") }}'
      }
    })
    .then(res => res.text())
    .then(html => {
      document.body.innerHTML = html;
    })
    .catch(err => alert('Update failed: ' + err));
  }
  </script>
</head>
<body>
  <header class="top-bar">
    <h1>Settings</h1>
    <nav>
      <a href="{{ url_for('dashboard') }}">Dashboard</a>
    </nav>
  </header>
  <div class="container">
    <p><strong>Install Dir:</strong> {{ config.INSTALL_DIR }}</p>
    <p><strong>Service Name:</strong> {{ config.SERVICE_NAME }}</p>
    <p><strong>Update Branch:</strong> {{ config.UPDATE_BRANCH }}</p>
    <button onclick="triggerUpdate()">Update Now</button>
  </div>
</body>
</html>
